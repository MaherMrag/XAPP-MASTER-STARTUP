<style>
    input.series-color {
        width: 100px;
        text-align: center;
    }

    input.series-color::-webkit-color-swatch {
        border: none;
    }
</style>
<script type="text/javascript">
    RED.nodes.registerType('s7.trend', {
        category: 'S7',
        autoedit: true,
        defaults: {
            name: { value: "_BatchTrend" },
            parentid: { },
            z: {},
            stack: { value: true },
            datatable: { value: false },
            chartType: { value: "line" },
            x_interval: { value: 'hours' },
            agg_by: { value: 'sum' },
            xformat: { value: "HH:mm:ss" },
            charttheme: { value: "infograpphic" }, // infograpphic // macarons // roma // shine // vintage
            title: { value: "Batch" },
            subtitle: { value: "subtitle" },
            title_alignvertical: { value: 'top' },
            title_alignhorizontal: { value: 'left' },
            show_title: { value: true },
            show_toolbox: { value: true },
            toolbox_alignvertical: { value: 'top' },
            toolbox_alignhorizontal: { value: 'right' },
            toolbox_orientation: { value: 'horizontal' },

            show_legend: { value: true },
            legend_alignvertical: { value: 'top' },
            legend_alignhorizontal: { value: 'center' },
            legend_orientation: { value: 'horizontal' },

            grid_top: { value: 70 },
            grid_bottom: { value: 50 },
            grid_left: { value: 5 },
            grid_right: { value: 5 },

            xname: { value: '' },
            xunit: { value: '' },
            xsplitline: { value: true },
            xsplitarea: { value: true },
            xaxistick: { value: true },
            xaxisline: { value: true },


            yname: { value: '' },
            yunit: { value: '' },
            ysplitline: { value: true },
            ysplitarea: { value: true },
            yaxistick: { value: true },
            yaxisline: { value: true },

            mark_min_show: { value: true },
            mark_max_show: { value: true },
            mark_average_point_show: { value: true },
            mark_average_line_show: { value: true },

            mark_line: { value: '' },
            mark_Area_min: { value: '' },
            mark_Area_max: { value: '' },

            width: { value: "0" },
            height: { value: "0" },
            x: { value: "0" },
            y: { value: "0" },
            datapoints: { value: {} },

            colors: { value: ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5'] },


        },
        inputs: 1,
        outputs: 1,
        oneditprepare: function () {
            var node = this;


            $("#node-input-size").elementSizer({
                width: "#node-input-width",
                height: "#node-input-height",
                maxWidth: 12,
                maxHeight: 7,

                fixedHeight: false,
                fixedWidth: true,
            });


            var defaultColors = ['#1F77B4', '#AEC7E8', '#FF7F0E', '#2CA02C', '#98DF8A', '#D62728', '#FF9896', '#9467BD', '#C5B0D5'];
            var setColour = function (id, value) {
                $(id).val(value);
                $(id).css("background-color", value);
                var rgb = tinycolor(value).toRgb();
                var level = ((rgb.r * 299) + (rgb.g * 587) + (rgb.b * 114)) / 1000;
                var textColor = (level >= 128) ? '#111111' : '#eeeeee';
                $(id).css("color", textColor);
            }




            var i = 0;
            var container = $('#series-items');

            for (id in node.datapoints) {

                if (node.datapoints.hasOwnProperty(id)) {
                    /* var data = node.payload[id]; */
                    i++;
                    var item = $(`<div class="form-row" id="${id}" style="margin-bottom: 5px;" ></div>`);
                    var label = $(`<label for="node-input-removeOlder">Serie 0${i} : </label>`);
                    var name = $(`<input type="text" id="${node.datapoints[id].id}" placeholder="${node.datapoints[id].name}" disabled autocomplete="off" style="width:40%;" >`);


                    var color = $(`<input type="color" id="node-input-color0${i}" class="series-color" style="margin-left:5px; margin-right:5px; width:100px;"/>`).val('#2CA02C');//node.payload[id].color);

                    item.append(label);
                    item.append(name);
                    item.append(color);

                    container.append(item);


                    if (node.datapoints[id].color) {
                        setColour("#node-input-color0" + i, node.datapoints[id].color);
                    }
                    else {
                        setColour("#node-input-color0" + i, defaultColors[i]);
                    }
                }
            }



            $(".series-color").on("change", function () {
                setColour("#" + $(this).attr("id"), $(this).val());
            });


            var oval = $("#node-input-xformat").val();
            if (!oval) { $("#node-input-xformat").val("HH:mm:ss"); }
            var odef = 'custom';
            if (oval === "HH:mm:ss") { odef = oval; }
            if (oval === "HH:mm") { odef = oval; }
            if (oval === "Y-M-D") { odef = oval; }
            if (oval === "D/M") { odef = oval; }
            if (oval === "dd HH:mm") { odef = oval; }
            if (oval === "auto") { odef = oval; }
            var ohms = { value: "HH:mm:ss", label: "HH:mm:ss", hasValue: false };
            var ohm = { value: "HH:mm", label: "HH:mm", hasValue: false };
            var oymd = { value: "Y-M-D", label: "Year-Month-Date", hasValue: false };
            var odm = { value: "D/M", label: "Date/Month", hasValue: false };
            var oahm = { value: "dd HH:mm", label: "Day HH:mm", hasValue: false };
            var ocus = { value: "custom", label: "custom", icon: "red/images/typedInput/az.png" };
            var oaut = { value: "auto", label: "automatic", hasValue: false };
            $("#node-input-xformat").typedInput({
                default: odef,
                types: [ohms, ohm, oahm, odm, oymd, ocus, oaut]
            });

        },
        oneditsave: function () {
            var node = this;
            if ($("#node-input-xformat").typedInput('type') !== 'custom') {
                $("#node-input-xformat").val($("#node-input-xformat").typedInput('type'));
            }

            node.payload = {};
            var id, name, color;
            $('#series-items').children().each((index, items) => {
                $(items).children().each((i, item) => {
                    switch (i) {
                        case 1: id = $(item).val(); name = $(item).text().trim();
                        case 2: color = $(item).val();
                    }
                })
                node.payload[id] = { id: id, name: name, color: color };
            });
            this.x_interval = $("#node-input-x_interval").val();
            this.agg_by = $("#node-input-agg_by").val();
            this.xformat = $("#node-input-xformat").val();
            //node._def.oncomponentload.call(node);

        },
        onwsprepare: function () {
            var container = $(`
                            <div class="col-md-${this.width} col-sm-${this.width / 2}">

                            </div> 
                        `);

            /* var chart = $(`<div id="echart_pie" style="min-height: 300px; height: 100%;  max-width: 100%;"></div>`); */
            var chart = $(`<canvas id="donutChart1" style="min-height: 250px; height: 100%; max-height: 100%; max-width: 100%;"></canvas>`);
            container.append(chart);


            return container;
        },
        oncomponentload: function (date, phases,batchid) {
            var nn = this;
            var item_id = nn.id.replace(".", "-");

            /*             var startdate = date.startdate;
                        var enddate = date.enddate;
            
                        console.log('html s7 startdate :', startdate)
                        console.log('html s7 enddate :', enddate) */
            var x_interval = nn.x_interval;
            var agg_by = nn.agg_by;
  

            var datapoints = nn.datapoints;


            var xformat = nn.xformat;




            var box_item = $(`<div id='${item_id}-info-box'class="info-box" style="border-radius: 0;box-shadow:0 0 black;border: 1px solid #ddd;border-right: 0;border-bottom: 0;">`).on("dblclick", function () {
                RED.editor.edit(nn);
                var Tree = treeNodes.Tree();
                var n = Tree.getNodesByParam('id', nn.id)
                Tree.selectNode(n[0])

            });
            var component_content = $(`<div class="info-box-content">`).appendTo(box_item);





            var chart_component = `<div id='${item_id}-chart' style='height: 100%;width: 100%; '></div>`




            function show_spinner() {
                component_content.empty();
                var spinner = $(`<div id ='${item_id}-spinner'  class='tp-spinner'>
														<span class='tb-spinner tb-spinner-is-centered'> </span>
                                                    </div>`).appendTo(component_content)
            }

            function load_data() {
                //var date = { startdate: startdate, enddate: enddate}



                var data = { date: date, x_interval: x_interval,agg_by:agg_by, datapoints: datapoints }
                console.log('Trend html data :', data)
                show_spinner();
                $.ajax({
                    method: 'POST',
                    contentType: 'application/json',
                    url: "trend/" + nn.id,
                    data: JSON.stringify(data),
                    success: function (data) {
                        if (nn.datatable) { init_table(data) }
                        else {
                            init_chart(data)
                        }


                    },
                    error: function (jqXHR, textStatus, errorThrown) {
                        console.log("Unexpected error saving user settings:", jqXHR.status, textStatus);
                    }
                });
            }

            function init_table(data) {



                var table_container = $(`<div class="vallis" style="width:100%">`)
                var table_item = $(`<table id="_datatable" class="table table-striped  table-hover table-bordered " style="width:100%;height='auto'">`).appendTo(table_container);
                var head_item = $(`<thead></thead>
                                `).appendTo(table_item)

                var item_tr = $(`<tr>`).appendTo(head_item)
                var item_date = $(`<th>Date/Heure</th>`).appendTo(item_tr)
                data.datasets.data.forEach((d) => {
                    var item_datapoint = $(`<th>${d.name}</th>`).appendTo(item_tr)
                })

                var footer_item = $(`
                                    <tfoot>
                                        <tr>
                                            <td>Totals</td>
                                            <td></td>
                                            <td></td>
                                        </tr>
                                    </tfoot>`).appendTo(table_item)

                var body_item = $(`<tbody>`).appendTo(table_item)
                //${item_id}
                var matrice = [];
                var i = 1;
                data.datasets.data.forEach((d) => {

                    xAxisData = [];
                    seriesData = [];
                    var serie = {};

                    var j = 0;
                    matrice[i] = []
                    matrice[0] = []
                    for (id in d.result) {
                        if (d.result.hasOwnProperty(id)) {
                            matrice[i][j] = parseFloat(d.result[id].value);
                            matrice[0][j] = moment(new Date(d.result[id].date)).format(xformat);

                            j++;
                        }
                    }
                    i++;
                })



                for (var i = 0; i < matrice[0].length; i++) {

                    var item_tr = $(`<tr></tr>`).appendTo(body_item);
                    for (var j = 0; j < matrice.length; j++) {
                        var item_td = $(`<td>${matrice[j][i]}</td>`).appendTo(item_tr)
                    }



                }


                /* for (id in xAxisData) {
                    if (xAxisData.hasOwnProperty(id)) {
                        var item = $(`<tr>
                                <td>${xAxisData[id]}</td>
                                <td>${xAxisData[id]}</td>
                                <td>${seriesData[id]}</td>
                              </tr>`).appendTo(body_item)
                    }
                } */

                component_content.empty();

                /* table_item.append(head_item)
                table_item.append(body_item) */
                // table_container.append(table_item)
                component_content.append(table_container);

                $('#_datatable').DataTable({
                    "paging": true,
                    "scrollY": "294px",
                    "scrollCollapse": true,
                    "lengthChange": true,
                    "searching": false,
                    "ordering": true,
                    "info": false,
                    "autoWidth": true,
                    "responsive": true,
                    "footerCallback": function (row, data, start, end, display) {
                        var api = this.api();
                        nb_cols = api.columns().nodes().length;
                        var j = 1;
                        while (j < nb_cols) {
                            var pageTotal = api
                                .column(j, { page: 'current' })
                                .data()
                                .reduce(function (a, b) {
                                    return Number(a) + Number(b);
                                }, 0);
                            // Update footer
                            $(api.column(j).footer()).html(pageTotal);
                            j++;
                        }
                    }
                });

                var table = $('#_datatable').DataTable();



            }
            function init_chart(data) {
                var theme = {
                    color: [
                        '#26B99A', '#34495E', '#BDC3C7', '#3498DB',
                        '#9B59B6', '#8abb6f', '#759c6a', '#bfd3b7'
                    ],

                    title: {
                        itemGap: 8,
                        textStyle: {
                            fontWeight: 'normal',
                            color: '#408829'
                        }
                    },

                    dataRange: {
                        color: ['#1f610a', '#97b58d']
                    },

                    toolbox: {
                        color: ['#408829', '#408829', '#408829', '#408829']
                    },

                    tooltip: {
                        backgroundColor: 'rgba(0,0,0,0.5)',
                        axisPointer: {
                            type: 'line',
                            lineStyle: {
                                color: '#408829',
                                type: 'dashed'
                            },
                            crossStyle: {
                                color: '#408829'
                            },
                            shadowStyle: {
                                color: 'rgba(200,200,200,0.3)'
                            }
                        }
                    },

                    dataZoom: {
                        dataBackgroundColor: '#eee',
                        fillerColor: 'rgba(64,136,41,0.2)',
                        handleColor: '#408829'
                    },
                    grid: {
                        borderWidth: 0
                    },

                    categoryAxis: {
                        axisLine: {
                            lineStyle: {
                                color: '#408829'
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: ['#eee']
                            }
                        }
                    },

                    valueAxis: {
                        axisLine: {
                            lineStyle: {
                                color: '#408829'
                            }
                        },
                        splitArea: {
                            show: true,
                            areaStyle: {
                                color: ['rgba(250,250,250,0.1)', 'rgba(200,200,200,0.1)']
                            }
                        },
                        splitLine: {
                            lineStyle: {
                                color: ['#eee']
                            }
                        }
                    },
                    timeline: {
                        lineStyle: {
                            color: '#408829'
                        },
                        controlStyle: {
                            normal: { color: '#408829' },
                            emphasis: { color: '#408829' }
                        }
                    },

                    k: {
                        itemStyle: {
                            normal: {
                                color: '#68a54a',
                                color0: '#a9cba2',
                                lineStyle: {
                                    width: 1,
                                    color: '#408829',
                                    color0: '#86b379'
                                }
                            }
                        }
                    },
                    map: {
                        itemStyle: {
                            normal: {
                                areaStyle: {
                                    color: '#ddd'
                                },
                                label: {
                                    textStyle: {
                                        color: '#c12e34'
                                    }
                                }
                            },
                            emphasis: {
                                areaStyle: {
                                    color: '#99d2dd'
                                },
                                label: {
                                    textStyle: {
                                        color: '#c12e34'
                                    }
                                }
                            }
                        }
                    },
                    force: {
                        itemStyle: {
                            normal: {
                                linkStyle: {
                                    strokeColor: '#408829'
                                }
                            }
                        }
                    },
                    chord: {
                        padding: 4,
                        itemStyle: {
                            normal: {
                                lineStyle: {
                                    width: 1,
                                    color: 'rgba(128, 128, 128, 0.5)'
                                },
                                chordStyle: {
                                    lineStyle: {
                                        width: 1,
                                        color: 'rgba(128, 128, 128, 0.5)'
                                    }
                                }
                            },
                            emphasis: {
                                lineStyle: {
                                    width: 1,
                                    color: 'rgba(128, 128, 128, 0.5)'
                                },
                                chordStyle: {
                                    lineStyle: {
                                        width: 1,
                                        color: 'rgba(128, 128, 128, 0.5)'
                                    }
                                }
                            }
                        }
                    },
                    gauge: {
                        startAngle: 225,
                        endAngle: -45,
                        axisLine: {
                            show: true,
                            lineStyle: {
                                color: [[0.2, '#86b379'], [0.8, '#68a54a'], [1, '#408829']],
                                width: 8
                            }
                        },
                        axisTick: {
                            splitNumber: 10,
                            length: 12,
                            lineStyle: {
                                color: 'auto'
                            }
                        },
                        axisLabel: {
                            textStyle: {
                                color: 'auto'
                            }
                        },
                        splitLine: {
                            length: 18,
                            lineStyle: {
                                color: 'auto'
                            }
                        },
                        pointer: {
                            length: '90%',
                            color: 'auto'
                        },
                        title: {
                            textStyle: {
                                color: '#333'
                            }
                        },
                        detail: {
                            textStyle: {
                                color: 'auto'
                            }
                        }
                    },
                    textStyle: {
                        fontFamily: 'Arial, Verdana, sans-serif'
                    }
                };



                component_content.empty();
                component_content.append(chart_component);

                if (chart_component.length) {

                    var charttheme = nn.charttheme === 'default' ? theme : nn.charttheme;
                    var echartBar = echarts.init(document.getElementById(`${item_id}-chart`), charttheme);

                    nn.subtitle = nn.subtitle = moment(new Date(date.startdate)).format('MMMM D, YYYY') + ' [ ' + moment(new Date(date.startdate)).format('HH:mm:ss') + ' - ' + moment(new Date(date.enddate)).format('HH:mm:ss') + ' ] ' ;
                    var title = {
                        show: nn.show_title,
                        text: nn.title,
                        subtext: nn.subtitle,
                        left: nn.title_alignhorizontal,
                        top: nn.title_alignvertical,
                    };

                    var toolbox = {
                        show: nn.show_toolbox,
                        orient: nn.toolbox_orientation,
                        left: nn.toolbox_alignhorizontal,
                        top: nn.toolbox_alignvertical,
                        feature: {
                            magicType: {
                                show: true,
                                title: {
                                    line: 'Line',
                                    bar: 'Bar',
                                    stack: 'Stack',
                                    tiled: 'Tiled'
                                },
                                type: ['line', 'bar', 'stack', 'tiled']
                            },
                            restore: {
                                show: true,
                                title: "Restore"
                            },
                            saveAsImage: {
                                show: true,
                                title: "Save Image"
                            },
                            dataZoom: {
                                yAxisIndex: 'none',
                                title: 'Zoom'
                            },
                            myfeature: {
                                show: true,
                                title: 'Maximize',
                                icon: 'path://M432.45,595.444c0,2.177-4.661,6.82-11.305,6.82c-6.475,0-11.306-4.567-11.306-6.82s4.852-6.812,11.306-6.812C427.841,588.632,432.452,593.191,432.45,595.444L432.45,595.444z M421.155,589.876c-3.009,0-5.448,2.495-5.448,5.572s2.439,5.572,5.448,5.572c3.01,0,5.449-2.495,5.449-5.572C426.604,592.371,424.165,589.876,421.155,589.876L421.155,589.876z M421.146,591.891c-1.916,0-3.47,1.589-3.47,3.549c0,1.959,1.554,3.548,3.47,3.548s3.469-1.589,3.469-3.548C424.614,593.479,423.062,591.891,421.146,591.891L421.146,591.891zM421.146,591.891',
                                onclick: function () {
                                    const element = document.getElementById(`${item_id}-info-box`);

                                    element.webkitRequestFullScreen();
                                }
                            },
                        }
                    };

                    var tooltip = {
                        trigger: 'axis',
                        axisPointer: {
                            type: 'cross', // 'line' | 'shadow'
                            animation: true,
                        },
                        /* formatter: function (params) {
                            params = params[0];
                            var date = new Date(params.name);
                            return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value;
                        },
                        position: function (pt) {
                            return [pt[0], '10%'];
                        }, */
                    };

                    var legend = {
                        show: nn.show_legend,
                        orient: nn.legend_orientation,
                        left: nn.legend_alignhorizontal,
                        top: nn.legend_alignvertical,
                        data: []
                    };

                    legend.data = data.legend;

                    var grid = {
                        left: nn.grid_left,
                        right: nn.grid_right,
                        bottom: nn.grid_bottom,
                        top: nn.grid_top,
                        containLabel: true
                    };

                    var xAxis = {
                        name: nn.xname,
                        axisLabel: {
                            formatter: '{value}' + nn.xunit, textStyle: {
                                color: '#999'
                            }
                        },
                        type: 'category',
                        boundaryGap: true,
                        splitLine: { show: nn.xsplitline },
                        splitArea: { show: nn.xsplitarea },
                        axisTick: { show: nn.xaxistick },
                        axisLine: { show: nn.xaxisline },
                        data: []
                    };

                    var yAxis = {
                        name: nn.yname,
                        axisLabel: {
                            formatter: '{value} ' + nn.yunit, textStyle: {
                                color: '#999'
                            }
                        },
                        type: 'value',
                        boundaryGap: false,
                        splitLine: { show: nn.ysplitline },
                        splitArea: { show: nn.ysplitarea },
                        axisTick: { show: nn.yaxistick },
                        axisLine: { show: nn.yaxisline },

                    };

                    var dataZoom = [{ show: true, realtime: true, start: 0, end: 100 }, { type: 'inside' }/* , { type: 'slider' } */];





                    var markPoint = { data: [] };
                    if (nn.mark_min_show) { markPoint.data.push({ type: 'min', name: 'min' }); }
                    if (nn.mark_max_show) { markPoint.data.push({ type: 'max', name: 'max' }); }
                    if (nn.mark_average_point_show) { markPoint.data.push({ type: 'average', name: 'average' }); }

                    var markLine = { silent: true, data: [] };
                    if (nn.mark_line) { markLine.data.push({ yAxis: parseFloat(nn.mark_line) }) }

                    if (nn.mark_average_line_show) { markLine.data.push({ type: 'average', name: 'average' }); }


                    var markLine = {
                        silent: false,
                        symbol: ['circle', 'circle'],
                        label: { show: true, },
                        data: []
                    };
                    markLine.data = phases


                    var markArea = { silent: true, data: [] }
                    if (nn.mark_Area_min && nn.mark_Area_max) {
                        markArea.data.push({ yAxis: '9000000'/* parseFloat(nn.mark_Area_min) */ });
                        markArea.data.push({ yAxis: '12000000'/* parseFloat(nn.mark_Area_max) } */ });
                    }
                    var seriesData = [];
                    var series = []
                    var xAxisData = [];


                    var first = true;
                    data.datasets.data.forEach((d) => {
                        xAxisData = [];
                        seriesData = [];
                        var serie = {};


                        for (id in d.result) {
                            if (d.result.hasOwnProperty(id)) {
                                xAxisData.push(moment(new Date(d.result[id].date)).format(xformat));
                                seriesData.push(d.result[id].value)
                            }
                        }

                        if (first) {
                            serie = { name: d.name, stack: nn.stack, type: nn.chartType, animation: true, smooth: true, data: seriesData, markPoint: markPoint, markLine: markLine, markArea: markArea }
                        } else {
                            serie = { name: d.name, stack: nn.stack, type: nn.chartType, animation: true, smooth: true, data: seriesData, markPoint: markPoint }
                        }
                        first = false;
                        series.push(serie)



                    })



                    xAxis.data = xAxisData;
                    options = {
                        calculable: true,
                        title: title,
                        legend: legend,
                        toolbox: toolbox,
                        tooltip: tooltip,
                        dataZoom: dataZoom,
                        grid: grid,
                        xAxis: xAxis,
                        yAxis: yAxis,
                        series: series
                    }


                    echartBar.setOption(options);
                    component_content.parent().on("resize", function () {
                        echartBar.resize();

                    })

                }





















                /* 
                                        var chart_id = nn.id.replace(".", "-");
                                        if ($('#' + chart_id).length) {
                                            var donutChartCanvas = $('#' + chart_id).get(0).getContext('2d')
                
                                            var donutData = {};
                                            donutData.labels = data.labels;
                                            donutData.datasets = data.datasets;
                
                                            var donutOptions = {
                                                maintainAspectRatio: false,
                                                responsive: true,
                                            }
                                            //Create pie or douhnut chart
                                            // You can switch between pie and douhnut using the method below.
                                            var donutChart = new Chart(donutChartCanvas, {
                                                type: 'doughnut',
                                                data: donutData,
                                                options: donutOptions
                                            })
                                        } */
            }

            load_data();
            return box_item;
        },

    });
</script>

<script type="text/html" data-template-name="s7.trend">
    <style>
       .red-ui-editor .stack  input[type="text"] {
            width: 100%;
            height: auto;
            border: none;
            margin: 0;
            padding: 0;
        }

        .red-ui-editor .stack  input[type="checkbox"] {
            height: auto;
            border: none;
            margin: 0;
            padding: 0;
        }

        .red-ui-editor .stack  select { 
            width: 100%;
            height: auto;
            border: 0;
            padding: 0;
            margin: 0;
        }

        .red-ui-editor .stack  table.red-ui-info-table tr:not(.blank) td:first-child {
    color: #444;
    vertical-align: top;
    width: 207px;
    padding: 3px 3px 3px 6px;
    background: #f7f7f7;
    border-right: 1px solid #ddd;
}

        .red-ui-editor .stack table.red-ui-info-table tr:not(.blank) { border: 1px solid #ddd; }

    </style>
    
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" />
    </div>
    


    <label><i class="fa fa-list"></i> Options</span></label>
    <hr> 
    <div class="stack">
        <table class="red-ui-info-table">
            <tbody>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Chart</td>

                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Datatable</td>
                    <td><input type="checkbox" id="node-input-datatable"/></td>
                 </tr>
                 <tr class="red-ui-help-info-row">
                     <td>Stack</td>
                     <td><input type="checkbox" id="node-input-stack"/></td>
                  </tr>
                <tr class="red-ui-help-info-row">
                    <td>Theme</td>
                    <td>
                        <select id="node-input-charttheme">
                            <option value="default">default</option>
                            <option value="infographic">infographic</option>
                            <option value="macarons">macarons</option>
                            <option value="roma">roma</option>
                            <option value="shine">shine</option>
                            <option value="vintage">vintage</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Type</td>
                    <td>
                        <select id="node-input-chartType" style="font-family: 'FontAwesome', 'Helvetica Neue', Helvetica, Arial, sans-serif;">
                            <option value="line"> &#xf201; Line chart</option>
                            <option value="bar"> &#xf080; Bar chart</option>
                            <option value="horizontalBar"> &#xf080; Bar chart (H)</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Format</td>
                    <td>
                        <input type="text" id="node-input-xformat"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>x-interval</td>
                    <td>
                        <select id="node-input-x_interval">
                            <option value='seconds'>seconds</option>
                            <option value='minutes'>minutes</option>
                            <option value='quarter_hours'>quarter-hours</option>      
                            <option value='hours'>hours</option>
                            <option value='days'>days</option>
                            <option value='months'>months</option>		  
                            <option value='years'>years</option>		
                        </select>	
                    </td>
                </tr>

                <tr class="red-ui-help-info-row">
                    <td>Aggregate by</td>
                    <td>
                    <select id="node-input-agg_by">
                        <option value='sum'>Sum</option>
                        <option value='min'>Min</option>
                        <option value='max'>Max</option>
                        <option value='avg'>Avg</option>	  	  
                    </select>	
                </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Title</td>

                </tr>
                <tr class="red-ui-help-info-row">
                    <td>show</td>
                    <td><input type="checkbox" id="node-input-show_title"/></td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Title</td>
                    <td><input type="text" id="node-input-title" placeholder="title"/></td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Sub title</td>
                    <td><input type="text" id="node-input-subtitle" placeholder="Sub title" /></td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Alignement vertical</td>
                    <td>
                        <select id="node-input-title_alignvertical">
                          <option value="top">top</option>
                          <option value="center">center</option>
                          <option value="bottom">bottom</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Alignement horizontal</td>
                    <td>
                        <select id="node-input-title_alignhorizontal">
                            <option value="left">left</option>
                            <option value="right">right</option>
                            <option value="center">center</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Toolbox</td>
    
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Show</td>
                    <td><input type="checkbox" id="node-input-show_toolbox" /></td>
                </tr>

                <tr class="red-ui-help-info-row">
                    <td>Alignement vertical</td>
                    <td>
                    <select id="node-input-toolbox_alignvertical">
                        <option value="top">top</option>
                        <option value="center">center</option>
                        <option value="bottom">bottom</option>
                    </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Alignement horizontal</td>
                    <td>
                        <select id="node-input-toolbox_alignhorizontal">
                            <option value="left">left</option>
                            <option value="right">right</option>
                            <option value="center">center</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Orientation</td>
                    <td>
                        <select id="node-input-toolbox_orientation">
                            <option value="horizontal">horizontal</option>
                            <option value="vertical">vertical</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Legend</td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Show</td>
                    <td>
                        <input type="checkbox" id="node-input-show_legend"/>
                    </td>
                    
                </tr>
                  <tr class="red-ui-help-info-row">
                    <td>Alignement vertical</td>
                    <td>
                        <select id="node-input-legend_alignvertical">
                            <option value="top">top</option>
                            <option value="center">center</option>
                            <option value="bottom">bottom</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Alignement horizontal</td>
                    <td>
                        <select id="node-input-legend_alignhorizontal">
                            <option value="left">left</option>
                            <option value="center">center</option>
                            <option value="right">right</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Orientation</td>
                    <td>
                        <select id="node-input-legend_orientation">
                            <option value="horizontal">horizontal</option>
                            <option value="vertical">vertical</option>
                        </select>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Grid</td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Top</td>
                    <td>
                        <input type="text" id="node-input-grid_top"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>bottom</td>
                    <td>
                        <input type="text" id="node-input-grid_bottom"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>left</td>
                    <td>
                        <input type="text" id="node-input-grid_left"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>right</td>
                    <td>
                        <input type="text" id="node-input-grid_right"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Axis-X</td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Name</td>
                    <td>
                        <input type="text" id="node-input-xname"  />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Unit</td>
                    <td>
                        <input type="text" id="node-input-xunit"  />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Splitline</td>
                    <td>
                        <input type="checkbox" id="node-input-xsplitline"  />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Axis tick</td>
                    <td>
                        <input type="checkbox" id="node-input-xaxistick"  />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Axis line</td>
                    <td>
                        <input type="checkbox" id="node-input-xaxisline"  />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Axis-Y</td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Name</td>
                    <td>
                        <input type="text" id="node-input-yname" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Unit</td>
                    <td>
                        <input type="text" id="node-input-yunit" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Splitline</td>
                    <td>
                        <input type="checkbox" id="node-input-ysplitline" />
                    </td>
                </tr>
    
                <tr class="red-ui-help-info-row">
                    <td>Split area</td>
                    <td>
                        <input type="checkbox" id="node-input-ysplitarea" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Axis tick</td>
                    <td>
                        <input type="checkbox" id="node-input-yaxistick" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Axis line</td>
                    <td>
                        <input type="checkbox" id="node-input-yaxisline" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td colspan="2">Mark</td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>MarkLine</td>
                    <td>
                        <input type="text" id="node-input-mark_line" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Mark Area min </td>
                    <td>
                        <input type="text" id="node-input-mark_Area_min" />
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>Mark Area max </td>
                    <td>
                        <input type="text" id="node-input-mark_Area_max" />
                    </td>
                </tr>
    
                <tr class="red-ui-help-info-row">
                    <td>MarkPoint Max</td>
                    <td>
                        <input type="checkbox" id="node-input-mark_max_show"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>MarkPoint Min</td>
                    <td>
                        <input type="checkbox" id="node-input-mark_min_show"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>MarkPoint Average</td>
                    <td>
                        <input type="checkbox" id="node-input-mark_average_point_show"/>
                    </td>
                </tr>
                <tr class="red-ui-help-info-row">
                    <td>MarkLine Average</td>
                    <td>
                        <input type="checkbox" id="node-input-mark_average_line_show"/>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    


    

    <hr />
    <div>Series Items :</div>
    <div class="form-row" id="series-items"></div>
    
</script>

<script type="text/x-red" data-help-name="s7.trend">
</script>